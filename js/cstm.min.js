var types = [];
types[200] = "success";
types[400] = "warning";
types[404] = "error";
types[999] = "error";

$(function(){
	$("#btn-login").click(function(){
		var username = $("#login-username").val();
		var password = $("#login-password").val();

		$.ajax({
			type: "POST",
			url:"login.php",
			dataType: "json",
			data: {"username": username, "password": password},
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "home.php";
			}
		});
	});
	$("#btn-register").click(function(){
		function getCookieValue(a) {
			var b = document.cookie.match('(^|;)\\s*' + a + '\\s*=\\s*([^;]+)');
			return b ? b.pop() : '';
		}
		var isRegistered = getCookieValue("isReg");
		if (isRegistered){
			swal("Bilgi", "Multi Uyelik Yasak", "error");
			return;
		}
			
		var username = $("#register-username").val();
		var name = $("#register-name").val();
		var tel = $("#register-tel").val();
		var email = $("#register-email").val();
		var password_1 = $("#register-password-1").val();
		var password_2 = $("#register-password-2").val();
		var ref = location.search.split('ref=')[1];
		if (ref == undefined) ref = 0;
		if (password_1 != password_2){
			alert("Passwords are not same");
			return false;
		}else var password = password_1;
		$.ajax({
			type: "POST",
			url:"ajax/register.php",
			dataType: "json",
			data: {"username": username,"name": name,"tel": tel, "email": email,"password": password, "ref": ref},
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				if (rt.Code == 200) {
					document.cookie = 'isReg = 1;';
					location.href = "login.php";
				}
			}
		});
	});


		$("#btn-pocket").click(function(){
		var name = $("#register-name").val();
		var bank = $("#register-bank").val();
		var no = $("#register-no").val();
		var amount = $("#register-amount").val();


		$.ajax({
			type: "POST",
			url:"ajax/pocket.php",
			dataType: "json",
			data: {"name": name, "bank": bank,"no": no, "amount": amount},
			success: function(rt){
				swal("Information", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "buypocket.php";
			}
		});
	});
		$("#btn-withdraw").click(function(){
		var withdraw = $("#register-withdraw").val();
		var tutar = $("#register-tutar").val();
		var name = $("#register-name").val();
		var banka = $("#register-banka").val();

		$.ajax({
			type: "POST",
			url:"ajax/withdraw.php",
			dataType: "json",
			data: { "withdraw": withdraw, "tutar": tutar, "name": name, "banka": banka},
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "paracek.php";
			}
		});
	});
		
	$(".btn-earn").click(function(){
		var id = $(this).attr("id");
		var type = id.replace("earn-", "");
		$.ajax({
			type: "POST",
			url:"ajax/earn.php",
			dataType: "json",
			data: {"action": "earn", "type": type},
			success: function(rt){
				swal("Bilgilendirme", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.reload();
			}
		});
	});//
		$(".btn-video").click(function(){
		$.ajax({
			type: "POST",
			url:"ajax/video.php",
			success: function(rt){
				swal("Bilgilendirme", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "video.php";
			}
		});
	});//
		$("#btn-message").click(function(){
		var baslik = $("#register-baslik").val();
		var mesaj = $("#register-mesaj").val();
		

		$.ajax({
			type: "POST",
			url:"ajax/mesajyaz.php",
			dataType: "json",
			data: { "baslik": baslik,"mesaj": mesaj},
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "mesajyaz.php";
			}
		});
	});//
	//
	
		$("#btn-box-buy").click(function(){
		$.ajax({
			type: "POST",
			url:"ajax/box.php",
			dataType: "json",
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.href = "kutu.php";
			}
		});
	});
	//
	
		$("#btn-box-open").click(function(){
		$.ajax({
			type: "POST",
			url:"ajax/box2.php",
			dataType: "json",
			success: function(rt){
				swal("Bilgi", rt.Text, types[rt.Code]);
				
				if (rt.Code == 200 || 999) location.href = "kutu.php";
			}
		});
	});
	
	
	$("#btn-forget").click(function(){
		var f_email = $("#forget-email").val();
		$.ajax({
			type: "POST",
			url:"ajax/forget.php",
			dataType: "json",
			data: {"email": f_email},
			success: function(rt){
				swal("Information", rt.Text, types[rt.Code]);
				if (rt.Code == 200) location.reload();
			}
		});
	});
});